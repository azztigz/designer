{"version":3,"sources":["lib.coffee"],"names":[],"mappings":"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","file":"lib.js","sourceRoot":"/source/","sourcesContent":["\"use strict\";\n\nlibs = new (Marionette.Application)\n\nlibs.addRegions\n  topRegion:  '#top_region'\n  contentRegion: '#content_region'\n  photosRegion: '#savedphotos'\n  searchRegion: '#search_region'\n\nlibs.Lists = Backbone.Model.extend();\n\nlibs.ListsCollection = Backbone.Collection.extend(\n  model: libs.Lists \n)\n\n\nlibs.lists = new (libs.ListsCollection)([\n  {\n    'id': '1'\n    'name': 'Saved Photos'\n    'slug': 'saved_photos'\n  }\n  {\n    'id': '2'\n    'name': 'Computer'\n    'slug': 'computer'\n  }\n  {\n    'id': '3'\n    'name': 'Buy Photos'\n    'slug': 'buy_photos'\n  }\n  {\n    'id': '4'\n    'name': 'Facebook'\n    'slug': 'facebook'\n  }\n  {\n    'id': '5'\n    'name': 'Instagram'\n    'slug': 'instagram'\n  }\n  {\n    'id': '6'\n    'name': 'Flickr'\n    'slug': 'flickr'\n  }\n])\n\nlibs.fot = ''\n\nlibs.infos = []\n\nlibs.module 'App', (App, libs, Backbone, Marionette, $, _) ->\n\n  App.currentpage = ''\n  App.temp = 'Templates'\n  App.page = 'saved_photos'\n  App.link = $('#editorlink').attr('value')\n  App.id = ''\n\n  App.getInfo = (col, vw, ur, reg) ->\n    col = new (libs.ListsCollection)()\n    col.fetch\n      url: ur\n      success: ->\n        layout = new (vw)(\n          collection: col\n        )\n        reg.show layout\n      error: ->\n        console.log 'No result found!!!'\n\n  App.getFotolia = (col, ur, id) ->\n    col = new (libs.Lists)()\n    col.fetch\n      url: ur\n      success: (col, response)->\n        response\n      error: ->\n        console.log 'No result found!!!'\n    col\n\n  App.Route = Backbone.Marionette.AppRouter.extend\n    routes:\n      '': 'view'\n      ':page': 'view'\n    view: (page) ->\n      if page == null\n        page = App.page\n      App.currentpage = page;\n\n      if page == 'saved_photos'\n        App.getInfo 'photos', App.PhotosView, '/editor/photos?link='+App.link, libs.photosRegion\n      if page == 'buy_photos'\n        layout = new App.SearchView\n        libs.searchRegion.show layout\n\n      # layout = new App.PhotosView\n      # libs.photosRegion.show layout\n\n  App.defaultView = Marionette.LayoutView.extend\n    onAttach: ->\n      $('.' + App.currentpage).addClass 'active'\n    initialize: ->\n      # $('#myModal').modal 'show'\n      @router = new (App.Route)\n      if !Backbone.History.started\n        Backbone.history.start()\n    template: '#top_template'\n    events:\n      'click #myTab li a': 'checkA'\n    checkA: (e) ->\n      clickedEl = $(e.currentTarget)\n      id = clickedEl.attr('id')\n      $('.tab-pane').each ->\n       $('div#' + @id).removeClass 'active'\n\n      $('.tab-pane#' + id).addClass 'active'\n      @router.navigate id, true\n\n  App.PhotosView = Marionette.LayoutView.extend\n    template: '#saved_template'\n    templateHelpers: ->\n      { \n        link: ->\n          \"?link=\"+App.link\n      }\n    onShow: ->\n      do ->\n        $('.overlay').css('display','block')\n        wookmark = undefined\n\n        getWindowWidth = ->\n          Math.max document.documentElement.clientWidth, window.innerWidth or 0\n\n        imagesLoaded '#container', ->\n          $('.overlay').css('display','none')\n          wookmark = new Wookmark('#container',\n            itemWidth: 150\n            outerOffset: 20\n            flexibleWidth: ->\n              if getWindowWidth() < 1024 then '100%' else '50%'\n          )\n\n    events:\n      \"click img\":\"checkImg\"\n    checkImg: (e) ->\n      clickedEl = $(e.currentTarget)\n      id = clickedEl.attr('id')\n      src = clickedEl.attr('src')\n      elem_id = $('#elem_id').val();\n      importImage src, $('#elem_id').val(), $('#image_width').val(), $('#image_height').val(), $('#'+elem_id).attr('x'), $('#'+elem_id).attr('y')\n      $('#myModal').modal 'hide'\n\n  App.SearchView = Marionette.LayoutView.extend\n    template: '#search_template'\n    regions:\n      fotolia:'#fotolia_wrapper'\n    ui:\n      input: '#searchval',\n      button: '#search'\n    events:\n      \"click @ui.button\":\"searchImg\"\n      \"change @ui.input\":\"searchImg\"\n    searchImg: () ->\n      search = @ui.input.val()\n      $('.overlay').css('display','block')\n      App.getInfo 'search', App.FotoliaView, '/editor/search?words='+search+'&link='+App.link, @fotolia\n\n  App.FotoliaView = Marionette.ItemView.extend\n    template: '#fotolia_template'  \n    onShow: ->\n      do ->\n        # $('.overlay').css('display','block')\n        wookmark = undefined\n\n        getWindowWidth = ->\n          Math.max document.documentElement.clientWidth, window.innerWidth or 0\n\n        imagesLoaded '#container2', ->\n          $('.overlay').css('display','none')\n          wookmark = new Wookmark('#container2',\n            itemWidth: 150\n            outerOffset: 20\n            flexibleWidth: ->\n              if getWindowWidth() < 1024 then '100%' else '50%'\n          )\n    events:\n      'click img':'getImg'\n      'click #infoClose':'closeInfo'\n      'click #insert_image':'getVal'\n    getImg: (e) ->\n      id = $(e.currentTarget).attr('id')\n      $('#info_'+id).modal 'show'\n    closeInfo: (e) ->\n      id = $(e.currentTarget).attr('data-id')\n      $('#'+id).modal('hide')\n    getVal: (e) ->\n      id = $(e.currentTarget).attr('id')\n      fotolia_id = $(e.currentTarget).attr('data-id')\n      price = $(e.currentTarget).attr('data-price')\n      license = $(e.currentTarget).attr('data-license')\n      src = $(e.currentTarget).attr('data-src')\n\n      fot = $('#elem_id').val()\n\n      fotolia = new (libs.Lists)()\n      fotolia.fetch\n        url: '/editor/getmedia?id='+fotolia_id+'&link='+App.link\n        success: (col, response)->\n          items = ''\n          _.each response, (item) ->\n            items = item\n\n          libs.infos[fot] = items;\n          elem_id = $('#elem_id').val()\n          importImage src, $('#elem_id').val(), price, $('#image_width').val(), $('#image_height').val(), $('#'+elem_id).attr('x'), $('#'+elem_id).attr('y'), license\n          $('#elem_id').attr('data-price',price);\n          $('#elem_id').attr('data-license',license);\n          $('#myModal').modal 'hide'\n\n        error: ->\n          console.log 'No result found!!!'\n\n\n      \n\n      \n  App.addInitializer ->\n    layout = new (App.defaultView)(collection: libs.lists)\n    libs.topRegion.show layout \n\n\n\n\npreviewNode = document.querySelector('#template')\npreviewNode.id = ''\npreviewTemplate = previewNode.parentNode.innerHTML\npreviewNode.parentNode.removeChild previewNode\n\nmyDropzone = new Dropzone(document.body,\n  url: '/editor/uploadFile?link='+$('#editorlink').attr('value')\n  acceptedFiles: 'image/*'\n  # maxFilesize: 10,\n  thumbnailWidth: 80\n  thumbnailHeight: 80\n  parallelUploads: 20\n  previewTemplate: previewTemplate\n  autoQueue: false\n  previewsContainer: '#previews'\n  clickable: '.fileinput-button')\n\nmyDropzone.on 'addedfile', (file) ->\n  file.previewElement.querySelector('.start').onclick = ->\n    myDropzone.enqueueFile file\n\nmyDropzone.on 'totaluploadprogress', (progress) ->\n  document.querySelector('#total-progress .progress-bar').style.width = progress + '%'\n\nmyDropzone.on 'sending', (file) ->\n  document.querySelector('#total-progress').style.opacity = '1'\n  file.previewElement.querySelector('.start').setAttribute 'disabled', 'disabled'\n\nmyDropzone.on 'queuecomplete', (progress) ->\n  document.querySelector('#total-progress').style.opacity = '0'\n\ndocument.querySelector('#actions .start').onclick = ->\n  myDropzone.enqueueFiles myDropzone.getFilesWithStatus(Dropzone.ADDED)\n\ndocument.querySelector('#actions .cancel').onclick = ->\n  myDropzone.removeAllFiles true\n\nmyDropzone.on 'error', (file) ->\n  @removeFile(file)\n  alert 'Invalid file!!!'\n\n\nimportImage = (url, id, price, imgw, imgh, x, y, license) ->\n  convertImgToBase64 url, id, ((base64Img, imageId) ->\n    svgEditor.importImageFromUrl base64Img, imageId, price, imgw, imgh, x, y, license\n    return\n  ), 'image/jpg'\n\nconvertImgToBase64 = (url, imageId, callback, outputFormat) ->\n  canvas = document.createElement('CANVAS')\n  ctx = canvas.getContext('2d')\n  img = new Image\n  img.crossOrigin = 'Anonymous'\n\n  img.onload = ->\n    canvas.height = img.height\n    canvas.width = img.width\n    ctx.drawImage img, 0, 0\n    dataURL = canvas.toDataURL(outputFormat or 'image/png')\n    callback.call this, dataURL, imageId\n    canvas = null\n\n  img.src = url\n"]}